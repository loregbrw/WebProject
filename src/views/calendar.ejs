<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=d, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/css/font_style.css">
    <link rel="stylesheet" type="text/css" href="/css/icon_style.css">
    <link rel="stylesheet" type="text/css" href="/css/nav_bar_style.css">
    <link rel="stylesheet" type="text/css" href="/css/home_style.css">
    <link rel="stylesheet" type="text/css" href="/css/sign_style.css">
    <link rel="stylesheet" type="text/css" href="/css/profile_style.css">
    <link rel="stylesheet" type="text/css" href="/css/display_flex_style.css">

    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/header_style.css">
    <title>Calendário</title>
</head>

<body>
    <header>
        <nav class="header navbar navbar-expand-lg">
            <div class="container-fluid padding-zero">
                <div class="menu">
                    <a class="padding-zero margin-zero hover" href="/<%= this_user.username %>/home"><img src="/img/logo-white-green.png"
                            class="logo-icon"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
                <span class="center">
                    <div class="collapse navbar-collapse center" id="navbarContent">
                        <ul class="flex-row gap-20 padding-zero margin-zero">
                            <li class="center">
                                <a class="font chocolate-brown superbold no-decoration hover" href="/"><span>Sair</span></a>
                            </li>
                            <li class="center">
                                <img class="hover" id="dark_mode_icon" src="/img/icon-dark-mode-0.png">
                            </li>
                        </ul>
                    </div>
                </span>
            </div>
        </nav>
    </header>
    <main class="height-vh height-min gap-30">
        <div class="flex-row width-100 space-between">
            <span class="chocolate-brown big superbold font">Calendário</span>
            <span class="font yellow big superbold"><%= month_name %> - <%=  year %></span>
        </div>
        <div class="box width-100 height-100 padding-zero calendar">
            <div class="day-week font white bold"  data-day="D">Domingo</div>
            <div class="day-week font white bold"  data-day="S">Segunda</div>
            <div class="day-week font white bold"  data-day="T">Terça</div>
            <div class="day-week font white bold"  data-day="Q">Quarta</div>
            <div class="day-week font white bold"  data-day="Q">Quinta</div>
            <div class="day-week font white bold"  data-day="S">Sexta</div>
            <div class="day-week font white bold"  data-day="S">Sábado</div>

            <% 
            const month_days = new Date(year, month_num, 0).getDate();
            const month_first_day = new Date(year, month_num - 1, 1).getDay();

            for (let i = 0; i < month_first_day; i++) { %>
                <div class="off-day"></div>
            <% } 

            for (let day = 1; day <= month_days; day++) { 
                let new_day = `${day}`;
                if (day < 10) {
                    new_day = "0" + new_day;
                }
            %>
                <a href="/<%= this_user.username %>/day/<%= new_day %>-<%= month_num %>-<%= year %>" class="day no-decoration">
                    <div class="green superbold font hover"><%= day %></div>
                    <img src="/img/plus-icon2.png" class="hover">
                </a>
            <% }

            const month_last_day = new Date(year, month_num - 1, month_days).getDay();
            const remaining_days = 42 - month_first_day - month_last_day;
            for (let i = 0; i < remaining_days; i++) { %>
                <div class="off-day"></div>
            <% } %>

        </div>
    </main>
    <script src="/js/dark_mode.js" defer></script>
</body>

</html>