<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/css/font_style.css">
    <link rel="stylesheet" type="text/css" href="/css/icon_style.css">
    <link rel="stylesheet" type="text/css" href="/css/nav_bar_style.css">
    <link rel="stylesheet" type="text/css" href="/css/home_style.css">
    <link rel="stylesheet" type="text/css" href="/css/view_recipes_style.css">
    <link rel="stylesheet" type="text/css" href="/css/small_box_style.css">
    <link rel="stylesheet" type="text/css" href="/css/display_flex_style.css">
    <link rel="stylesheet" type="text/css" href="/css/sign_style.css">
    <link rel="stylesheet" type="text/css" href="/css/edit_recipes_style.css">

    <link rel="stylesheet" type="text/css" href="/css/header_style.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <title>Editar <%= this_recipe.name %></title>
</head>

<body>
    <header>
        <nav class="header navbar navbar-expand-lg">
            <div class="container-fluid padding-zero">
                <div class="menu">
                    <a class="padding-zero margin-zero hover" href="/<%= this_user.username %>/home"><img src="/img/logo-white-green.png"
                            class="logo-icon"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
                <span class="center">
                    <div class="collapse navbar-collapse center" id="navbarContent">
                        <ul class="flex-row gap-20 padding-zero margin-zero">
                            <li class="center">
                                <a class="font chocolate-brown superbold no-decoration hover" href="/"><span>Sair</span></a>
                            </li>
                            <li class="center">
                                <img class="hover" id="dark_mode_icon" src="/img/icon-dark-mode-0.png">
                            </li>
                        </ul>
                    </div>
                </span>
            </div>
        </nav>
    </header>
    <main>
        <form action="/<%= this_user.username %>/edit-recipes-<%= this_recipe.id_recipe %>" method="post" enctype="multipart/form-data" class="recipes-box gap-40">
            <div class="view-recipes-top flex-row">
                <div class="view-recipes-header flex-column gap-30">
                    <div class="flex-column">
                        <img class="recipes-img height-300px" id="imgFoto" src="<%= this_recipe.image %>">
                    </div>
                    <input type="file" id="flImage" name="recipe_image" id="foto" accept="image/*" placeholder="Teste" hidden>
                </div>
                <div class="view-recipes-content flex-column gap-20 space-between">
                    <div class="recipe-title-and-favorite flex-row">
                        <input class="font bold" type="text" name="recipe_name" value="<%= this_recipe.name %>" required>
                    </div>
                    <div class="recipe-info">
                            <img class="icon" src="/img/icon-clock-green.png">
                            <input type="text" name="recipe_duration" value="<%= this_recipe.duration %>" required>
                            <img class="icon" src="/img/icon-portions-green.png">
                            <input type="number" name="recipe_portions" value="<%= this_recipe.portions %>" min="1" required>
                        <!-- <img class="icon icon-invert" id="post_view_setting" src="/img/icon-post-view-1-bigger.png"
                            alt="Vizualização do post"> -->
                    </div>
                    <div class="recipe-types">
                        <div class="flex-wrap flex-row space-between">
                            <div class="recipe-type-box">
                                <span class="small-box box-green white">Salgado</span>
                                <span class="small-box box-yellow white">Quente</span>
                                <span class="small-box box-brown white">Janta</span>
                                <span class="small-box box-macchiato white">Almoço</span>
                            </div>
                            <div class="recipe-type-add">
                                <img class="icon" src="/img/plus-icon.png" data-bs-toggle="modal"
                                    data-bs-target="#types_meals">
                            </div>
                        </div>
                        <div class="modal fade" id="types_meals" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title font chocolate-brown big bold" id="exampleModalLabel">
                                            Refeições e tipos de receita</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="container-fluid flex-column gap-30">
                                            <div>
                                                <h3 class="green bold font">Refeições</h3>
                                                <div class="row row-cols-1 row-cols-md-3">
                                                    <div class="col center gap-10">
                                                        <input type="checkbox">
                                                        <label class="small-box box-green white bold">Almoço</label>
                                                    </div>
                                                    <div class="col center gap-10">
                                                        <input type="checkbox">
                                                        <label class="small-box box-green white bold">Almoço</label>
                                                    </div>
                                                    <div class="col center gap-10">
                                                        <input type="checkbox">
                                                        <label class="small-box box-green white bold">Almoço</label>
                                                    </div>
                                                    <div class="col center gap-10">
                                                        <input type="checkbox">
                                                        <label class="small-box box-green white bold">Almoço</label>
                                                    </div>
                                                    <div class="col center gap-10">
                                                        <input type="checkbox">
                                                        <label class="small-box box-green white bold">Almoço</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <h3 class="green bold font">Tipos</h3>
                                                <div class="row row-cols-1 row-cols-md-3">
                                                    <div class="col center gap-10">
                                                        <input type="checkbox">
                                                        <label class="small-box box-green white bold">Almoço</label>
                                                    </div>
                                                    <div class="col center gap-10">
                                                        <input type="checkbox">
                                                        <label class="small-box box-green white bold">Almoço</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="edit-button">
                                            <button type="button">Adicionar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="recipe-description font chocolate-brown">
                        <textarea name="recipe_description" id="" maxlength="255" required><%= this_recipe.description %></textarea>
                    </div>
                </div>
            </div>
            <div class="edit-recipes-bottom gap-40">
                <div class="view-recipes-ingredients flex-column gap-20">
                    <div class="recipes-ingredients-title">
                        <img class="icon icon-color" src="/img/icon-ingredients.png">
                        <span class="font chocolate-brown bold big">Ingredientes</span>
                    </div>
                    <div class="font chocolate-brown flex-column gap-20 width-100 " id="ingredients">
                        <% this_ingredients.forEach((ingredient, index) => { %>
                            <div class="flex-row gap-20">
                                <input name="ingredients[<%= index %>][ingredient_weight]" class="width-50px" type="number" placeholder="1" min="1" value="<%= ingredient.weight %>" required>
                                <input name="ingredients[<%= index %>][ingredient_description]" class="width-70" type="text" placeholder="Ingrediente" maxlength="255" value="<%= ingredient.description %>" required>
                            </div>
                        <% }); %>
                    </div>
                    <div>
                        <img class="icon icon-color" src="/img/icon-delete.png">
                        <img class="icon" id="add_input_button" src="/img/plus-icon.png">
                        <span class="yellow font bold small">Adicionar ingrediente</span>
                    </div>
                </div>
                <div class="view-recipes-steps flex-column gap-20">
                    <div class="recipes-ingredients-title">
                        <img class="icon icon-color" src="/img/icon-preparation.png">
                        <span class="font chocolate-brown bold big">Modo de Preparo</span>
                    </div>
                    <div class="font chocolate-brown flex-column gap-20" id="steps">
                        <% this_steps.forEach((step, index) => { %>
                            <div class="flex-row gap-20">
                                <input name="steps[<%= index %>][step_weight]" class="width-50px" type="number" placeholder="1" min="1" required value="<%= step.weight %>">
                                <textarea name="steps[<%= index %>][step_description]" id="" class="font" placeholder="Passo" required><%= step.description %></textarea>
                            </div>
                        <% }); %>
                    </div>
                    <div>
                        <img class="icon icon-color" src="/img/icon-delete.png">
                        <img class="icon" id="add_textarea_button" src="/img/plus-icon.png">
                        <span class="yellow font bold small">Adicionar modo de preparo</span>
                    </div>
                </div>
            </div>
            <div class="view-recipes-button flex-row flex-end">
                <div class="edit-button">
                    <button type="submit">Salvar</button>
                </div>
            </div>
        </form>
    </main>
    <script src="/js/add_photo.js" defer></script>
    <script src="/js/add_recipe_information.js" defer></script>
    <script src="/js/dark_mode.js" defer></script>
</body>

</html>